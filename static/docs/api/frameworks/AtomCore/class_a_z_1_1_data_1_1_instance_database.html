<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open 3D Engine AtomCore API Reference: AZ::Data::InstanceDatabase&lt; Type &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-placeholder-text"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open 3D Engine AtomCore API Reference
   &#160;<span id="projectnumber">24.09</span>
   </div>
   <div id="projectbrief">O3DE is an open-source, fully-featured, high-fidelity, modular 3D engine for building games and simulations, available to every industry.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_a_z_1_1_data_1_1_instance_database.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_a_z_1_1_data_1_1_instance_database-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AZ::Data::InstanceDatabase&lt; Type &gt; Class Template Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;InstanceDatabase.h&gt;</code></p>

<p>Inherits <a class="el" href="class_a_z_1_1_data_1_1_instance_database_interface.html">AZ::Data::InstanceDatabaseInterface</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0e43fa585638663da4fd7f5eb1248f89"><td class="memItemLeft" align="right" valign="top"><a id="a0e43fa585638663da4fd7f5eb1248f89"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AZ_CLASS_ALLOCATOR</b> (<a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">InstanceDatabase</a>, AZ::SystemAllocator)</td></tr>
<tr class="separator:a0e43fa585638663da4fd7f5eb1248f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebaf1d17dacbd31229060878b69fa4e2"><td class="memItemLeft" align="right" valign="top">Data::Instance&lt; Type &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_data_1_1_instance_database.html#aebaf1d17dacbd31229060878b69fa4e2">Find</a> (const <a class="el" href="struct_a_z_1_1_data_1_1_instance_id.html">InstanceId</a> &amp;id) const</td></tr>
<tr class="separator:aebaf1d17dacbd31229060878b69fa4e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2ae05e1b59abf370bb758c79fd59774"><td class="memItemLeft" align="right" valign="top">Data::Instance&lt; Type &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_data_1_1_instance_database.html#ae2ae05e1b59abf370bb758c79fd59774">FindOrCreate</a> (const <a class="el" href="struct_a_z_1_1_data_1_1_instance_id.html">InstanceId</a> &amp;id, const Asset&lt; AssetData &gt; &amp;asset, const AZStd::any *param=nullptr)</td></tr>
<tr class="separator:ae2ae05e1b59abf370bb758c79fd59774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2b3facb807bedac71b1ce5f278d2eac"><td class="memItemLeft" align="right" valign="top"><a id="ad2b3facb807bedac71b1ce5f278d2eac"></a>
Data::Instance&lt; Type &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_data_1_1_instance_database.html#ad2b3facb807bedac71b1ce5f278d2eac">FindOrCreate</a> (const Asset&lt; AssetData &gt; &amp;asset, const AZStd::any *param=nullptr)</td></tr>
<tr class="memdesc:ad2b3facb807bedac71b1ce5f278d2eac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the above FindOrCreate using an <a class="el" href="struct_a_z_1_1_data_1_1_instance_id.html">InstanceId</a> created from the asset. <br /></td></tr>
<tr class="separator:ad2b3facb807bedac71b1ce5f278d2eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1849145959339fd1a3c8886f64a78ba"><td class="memItemLeft" align="right" valign="top"><a id="ae1849145959339fd1a3c8886f64a78ba"></a>
Data::Instance&lt; Type &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_data_1_1_instance_database.html#ae1849145959339fd1a3c8886f64a78ba">Create</a> (const Asset&lt; AssetData &gt; &amp;asset, const AZStd::any *param=nullptr)</td></tr>
<tr class="memdesc:ae1849145959339fd1a3c8886f64a78ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls FindOrCreate using a random <a class="el" href="struct_a_z_1_1_data_1_1_instance_id.html">InstanceId</a>. <br /></td></tr>
<tr class="separator:ae1849145959339fd1a3c8886f64a78ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb0d920f2cc33b9902c319ecd483cb5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_data_1_1_instance_database.html#acdb0d920f2cc33b9902c319ecd483cb5">TEMPOrphan</a> (const <a class="el" href="struct_a_z_1_1_data_1_1_instance_id.html">InstanceId</a> &amp;id)</td></tr>
<tr class="separator:acdb0d920f2cc33b9902c319ecd483cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cd8091275ca3e0e330dea5911264abf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_data_1_1_instance_database.html#a0cd8091275ca3e0e330dea5911264abf">ForEach</a> (AZStd::function&lt; void(Type &amp;)&gt; callback)</td></tr>
<tr class="separator:a0cd8091275ca3e0e330dea5911264abf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a518a974405964df06ba337089b1814f4"><td class="memItemLeft" align="right" valign="top"><a id="a518a974405964df06ba337089b1814f4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ForEach</b> (AZStd::function&lt; void(const Type &amp;)&gt; callback) const</td></tr>
<tr class="separator:a518a974405964df06ba337089b1814f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a7d1f2af5680ee799b55bb70ac6c5068a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_data_1_1_instance_database.html#a7d1f2af5680ee799b55bb70ac6c5068a">Create</a> (const AssetType &amp;assetType, const <a class="el" href="struct_a_z_1_1_data_1_1_instance_handler.html">InstanceHandler</a>&lt; Type &gt; &amp;handler, bool checkAssetIds=true)</td></tr>
<tr class="separator:a7d1f2af5680ee799b55bb70ac6c5068a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a209eda5d573cd502184540a2dec1f71a"><td class="memItemLeft" align="right" valign="top"><a id="a209eda5d573cd502184540a2dec1f71a"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>Destroy</b> ()</td></tr>
<tr class="separator:a209eda5d573cd502184540a2dec1f71a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0055e7e5f4e9e5bec67112102f3cc6bf"><td class="memItemLeft" align="right" valign="top"><a id="a0055e7e5f4e9e5bec67112102f3cc6bf"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>IsReady</b> ()</td></tr>
<tr class="separator:a0055e7e5f4e9e5bec67112102f3cc6bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a187d6bbcd92857188ca33e0bc41d8d3b"><td class="memItemLeft" align="right" valign="top"><a id="a187d6bbcd92857188ca33e0bc41d8d3b"></a>
static <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">InstanceDatabase</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>Instance</b> ()</td></tr>
<tr class="separator:a187d6bbcd92857188ca33e0bc41d8d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Type&gt;<br />
class AZ::Data::InstanceDatabase&lt; Type &gt;</h3>

<p>This class is a simple database of typed instances. An 'instance' in this context is any class which inherits from <a class="el" href="class_a_z_1_1_data_1_1_instance_data.html">InstanceData</a>, is created at runtime from an asset, and has a unique instance id. The purpose of this system is to control de-duplication of instances at runtime, and to associate instance types with their originating asset types.</p>
<p>The database has itself singleton access, but it should be owned by the corresponding system (which is in charge of creation / destruction of the database). To use the database, you may instantiate it using one of the following approaches: 1) Instantiate one <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">InstanceDatabase</a> for each concrente instance class. Use this approach if all concrete instance classes are known at compile time. 2) Instantiate one <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">InstanceDatabase</a> for a known instance base class, and then register multiple InstanceHandlers for each concrete instance class. Use this approach if only the instance base class is known at compile time and the concrete instance classes are only known at runtime. For example, Atom provides abstract StreamingImageControllerAsset and StreamingImageController classes, and a game-specific gem can provide custom implementations by adding a handler to InstanceDatabase&lt;StreamingImageController&gt;.</p>
<p>The database allows you to find an instance from its corresponding <a class="el" href="struct_a_z_1_1_data_1_1_instance_id.html">InstanceId</a>. Alternatively, you can 'find or create' an instance, which will create the instance if it doesn't already exist, or return you the existing instance. The 'find or create' operation takes an asset as input. Instances are designed to be trivially created from their parent asset.</p>
<p>The database does NOT own instances. Ownership is returned to you in the form of a smart pointer (Data::Instance&lt;&gt;). This is the same ownership model used by the asset manager.</p>
<p>The system is thread-safe. You can create / destroy instances from any thread, however Instances should not be copied between threads, they should always be retrieved from the <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">InstanceDatabase</a> directly.</p>
<p>Example Usage (using instantiation approach #1 described above): </p><div class="fragment"><div class="line"><span class="comment">// Create the database.</span></div>
<div class="line">Data::InstanceHandler&lt;MyInstanceType&gt; handler;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Provide your own creator (and optional deleter) to control allocation / initialization of your object.</span></div>
<div class="line">handler.m_createFunction = [] (Data::AssetData* assetData) { <span class="keywordflow">return</span> aznew MyInstanceType(assetData); };</div>
<div class="line"> </div>
<div class="line"><a class="code" href="class_a_z_1_1_data_1_1_instance_database.html#a7d1f2af5680ee799b55bb70ac6c5068a">Data::InstanceDatabase&lt;MyInstanceType&gt;::Create</a>(azrtti_typeid&lt;MyAssetType&gt;(), handler);</div>
<div class="line"> </div>
<div class="line">Data::Asset&lt;MyAssetType&gt; myAsset{ASSETID_1};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create an instance id from the asset id (1-to-1 mapping).</span></div>
<div class="line">Data::InstanceId instanceId = <a class="code" href="struct_a_z_1_1_data_1_1_instance_id.html#a957c6e776dcc7e0ea790cbeca5279b66">Data::InstanceId::CreateFromAssetId</a>(myAsset.GetId());</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Find or create an instance from an asset.</span></div>
<div class="line">Data::Instance&lt;MyInstanceType&gt; instance = Data::InstanceDatabase&lt;MyInstanceType&gt;::Instance().FindOrCreate(instanceId, myAsset);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create an instance by name.</span></div>
<div class="line">Data::InstanceId instanceIdName = <a class="code" href="struct_a_z_1_1_data_1_1_instance_id.html#ad78b5e158e8aa80feaf4896a541a6335">Data::InstanceId::CreateName</a>(<span class="stringliteral">&quot;HelloWorld&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Creates a new instance from the same asset (the old instance is de-ref&#39;d).</span></div>
<div class="line">instance = Data::InstanceDatabase&lt;MyInstanceType&gt;::Instance().FindOrCreate(instanceIdName, myAsset);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Finds an existing instance.</span></div>
<div class="line">Data::Instance&lt;MyInstanceType&gt; instance2 = Data::InstanceDatabase&lt;MyInstanceType&gt;::Instance().Find(instanceIdName);</div>
<div class="line"> </div>
<div class="line">instance == instance2; <span class="comment">// true</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Find or create an existing instance.</span></div>
<div class="line">Data::Instance&lt;MyInstanceType&gt; instance3 = Data::InstanceDatabase&lt;MyInstanceType&gt;::Instance().FindOrCreate(instanceIdName, myAsset);</div>
<div class="line"> </div>
<div class="line">instance == instance2 == instance3; <span class="comment">// true</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// INVALID: Create an instance using a different asset.</span></div>
<div class="line">Data::Asset&lt;MyAssetType&gt; myAsset2{ASSETID_2};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This will assert. You can only request an instance using the SAME asset each time. If the system detects a mismatch it</span></div>
<div class="line"><span class="comment">// will throw an error.</span></div>
<div class="line">Data::Instance&lt;MyInstanceType&gt; instance3 = Data::InstanceDatabase&lt;MyInstanceType&gt;::Instance().FindOrCreate(instanceIdName, myAsset2);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// After all objects are out of scope! The system will report an error if objects are still active on destruction.</span></div>
<div class="line">Data::InstanceDatabase&lt;MyInstanceType&gt;::Destroy();</div>
<div class="ttc" id="aclass_a_z_1_1_data_1_1_instance_database_html_a7d1f2af5680ee799b55bb70ac6c5068a"><div class="ttname"><a href="class_a_z_1_1_data_1_1_instance_database.html#a7d1f2af5680ee799b55bb70ac6c5068a">AZ::Data::InstanceDatabase::Create</a></div><div class="ttdeci">static void Create(const AssetType &amp;assetType, const InstanceHandler&lt; Type &gt; &amp;handler, bool checkAssetIds=true)</div><div class="ttdef"><b>Definition:</b> InstanceDatabase.h:495</div></div>
<div class="ttc" id="astruct_a_z_1_1_data_1_1_instance_id_html_a957c6e776dcc7e0ea790cbeca5279b66"><div class="ttname"><a href="struct_a_z_1_1_data_1_1_instance_id.html#a957c6e776dcc7e0ea790cbeca5279b66">AZ::Data::InstanceId::CreateFromAssetId</a></div><div class="ttdeci">static InstanceId CreateFromAssetId(const AssetId &amp;assetId, const SubIdContainer &amp;subIds={})</div></div>
<div class="ttc" id="astruct_a_z_1_1_data_1_1_instance_id_html_ad78b5e158e8aa80feaf4896a541a6335"><div class="ttname"><a href="struct_a_z_1_1_data_1_1_instance_id.html#ad78b5e158e8aa80feaf4896a541a6335">AZ::Data::InstanceId::CreateName</a></div><div class="ttdeci">static InstanceId CreateName(const char *name, const SubIdContainer &amp;subIds={})</div></div>
</div><!-- fragment --> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a7d1f2af5680ee799b55bb70ac6c5068a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d1f2af5680ee799b55bb70ac6c5068a">&#9670;&nbsp;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Type &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">AZ::Data::InstanceDatabase</a>&lt; Type &gt;::Create </td>
          <td>(</td>
          <td class="paramtype">const AssetType &amp;&#160;</td>
          <td class="paramname"><em>assetType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_a_z_1_1_data_1_1_instance_handler.html">InstanceHandler</a>&lt; Type &gt; &amp;&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>checkAssetIds</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create the <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">InstanceDatabase</a> with a single handler. Use this function when creating an <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">InstanceDatabase</a> that will handle concrete classes of Type. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">assetType</td><td>- All instances will be based on subclasses of this asset type. </td></tr>
    <tr><td class="paramname">handler</td><td>- An <a class="el" href="struct_a_z_1_1_data_1_1_instance_handler.html">InstanceHandler</a> that creates instances of assetType assets. </td></tr>
    <tr><td class="paramname">checkAssetIds</td><td>- If true, it will be validated that "instance-&gt;m_assetId == asset.GetId()" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aebaf1d17dacbd31229060878b69fa4e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebaf1d17dacbd31229060878b69fa4e2">&#9670;&nbsp;</a></span>Find()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Type &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Data::Instance&lt; Type &gt; <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">AZ::Data::InstanceDatabase</a>&lt; Type &gt;::Find </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_a_z_1_1_data_1_1_instance_id.html">InstanceId</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempts to find an instance associated with the provided id. If the instance exists, it is returned. If no instance is found, nullptr is returned. It is safe to call this from multiple threads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The id used to find an instance in the database. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae2ae05e1b59abf370bb758c79fd59774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2ae05e1b59abf370bb758c79fd59774">&#9670;&nbsp;</a></span>FindOrCreate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Type &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Data::Instance&lt; Type &gt; <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">AZ::Data::InstanceDatabase</a>&lt; Type &gt;::FindOrCreate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_a_z_1_1_data_1_1_instance_id.html">InstanceId</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Asset&lt; AssetData &gt; &amp;&#160;</td>
          <td class="paramname"><em>asset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const AZStd::any *&#160;</td>
          <td class="paramname"><em>param</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempts to find an instance associated with the provided id. If it exists, it is returned. Otherwise, it is created using the provided asset data and then returned. It is safe to call this method from multiple threads, even with the same id. The call is synchronous and other threads will block until creation is complete.</p>
<p>PERFORMANCE NOTE: If the asset data is not loaded and creation is required, the system will perform a BLOCKING load on the asset. If this behavior is not desired, the user should either ensure the asset is loaded prior to calling this method, or call <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html#aebaf1d17dacbd31229060878b69fa4e2">Find</a> instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The id used to find or create an instance in the database. </td></tr>
    <tr><td class="paramname">asset</td><td>The asset used to initialize the instance, if it does NOT already exist. If the instance exists, the asset id is checked against the existing instance. If validation is enabled, the system will error if the created asset id does not match the provided asset id. It is required that you consistently provide the same asset when acquiring an instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a smart pointer to the instance, which was either found or created. </dd></dl>

</div>
</div>
<a id="a0cd8091275ca3e0e330dea5911264abf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cd8091275ca3e0e330dea5911264abf">&#9670;&nbsp;</a></span>ForEach()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Type &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">AZ::Data::InstanceDatabase</a>&lt; Type &gt;::ForEach </td>
          <td>(</td>
          <td class="paramtype">AZStd::function&lt; void(Type &amp;)&gt;&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A helper function to visit every instance in the database and calls the provided callback method. Note: this function can be slow depending on how many instances in the database </p>

</div>
</div>
<a id="acdb0d920f2cc33b9902c319ecd483cb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb0d920f2cc33b9902c319ecd483cb5">&#9670;&nbsp;</a></span>TEMPOrphan()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Type &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">AZ::Data::InstanceDatabase</a>&lt; Type &gt;::TEMPOrphan </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_a_z_1_1_data_1_1_instance_id.html">InstanceId</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes the instance data from the database. Does not release it. References to existing instances will remain valid, but new calls to Create/FindOrCreate will create a new instance This function is temporary, to provide functionality needed for Model hot-reloading, but will be removed once the Model class does not need it anymore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The id of the instance to remove </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Code/Framework/AtomCore/AtomCore/Instance/InstanceDatabase.h</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>AZ</b></li><li class="navelem"><b>Data</b></li><li class="navelem"><a class="el" href="class_a_z_1_1_data_1_1_instance_database.html">InstanceDatabase</a></li>
    <li class="footer">Generated on Tue Oct 8 2024 21:02:46 for Open 3D Engine AtomCore API Reference by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
