<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Open 3D Engine Atom Gem API Reference: Gems/Atom/RPI/Code/External/MaskedOcclusionCulling/MaskedOcclusionCulling.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open 3D Engine Atom Gem API Reference
   &#160;<span id="projectnumber">23.05.0</span>
   </div>
   <div id="projectbrief">O3DE is an open-source, fully-featured, high-fidelity, modular 3D engine for building games and simulations, available to every industry.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_masked_occlusion_culling_8h.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">MaskedOcclusionCulling.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Masked Occlusion Culling.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_masked_occlusion_culling.html">MaskedOcclusionCulling</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_masked_occlusion_culling_1_1_vertex_layout.html">MaskedOcclusionCulling::VertexLayout</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_masked_occlusion_culling_1_1_scissor_rect.html">MaskedOcclusionCulling::ScissorRect</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_masked_occlusion_culling_1_1_tri_list.html">MaskedOcclusionCulling::TriList</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_masked_occlusion_culling_1_1_occlusion_culling_statistics.html">MaskedOcclusionCulling::OcclusionCullingStatistics</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aff26d3fb3dd5fd95f2fdd48b69be45f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_masked_occlusion_culling_8h.html#aff26d3fb3dd5fd95f2fdd48b69be45f3">QUICK_MASK</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aff26d3fb3dd5fd95f2fdd48b69be45f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72c366d12bc4a47321429c33847c85c2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_masked_occlusion_culling_8h.html#a72c366d12bc4a47321429c33847c85c2">USE_D3D</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a72c366d12bc4a47321429c33847c85c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a855546ee8dc10a6e6bc125c5ea9b0f55"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_masked_occlusion_culling_8h.html#a855546ee8dc10a6e6bc125c5ea9b0f55">PRECISE_COVERAGE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a855546ee8dc10a6e6bc125c5ea9b0f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6152e1b0a95f335af2f5d9789147aaa8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_masked_occlusion_culling_8h.html#a6152e1b0a95f335af2f5d9789147aaa8">USE_AVX512</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a6152e1b0a95f335af2f5d9789147aaa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a662cd47bd729c561e452983b4933106b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_masked_occlusion_culling_8h.html#a662cd47bd729c561e452983b4933106b">CLIPPING_PRESERVES_ORDER</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a662cd47bd729c561e452983b4933106b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5446852165fb3c08078b5f2b2339cc32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_masked_occlusion_culling_8h.html#a5446852165fb3c08078b5f2b2339cc32">ENABLE_STATS</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a5446852165fb3c08078b5f2b2339cc32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af89c3f9d86340266935e92bf0f66529e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_masked_occlusion_culling_8h.html#af89c3f9d86340266935e92bf0f66529e">MOC_RECORDER_ENABLE</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:af89c3f9d86340266935e92bf0f66529e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Masked Occlusion Culling. </p>
<p>General information</p>
<ul>
<li>Input to all API functions are (x,y,w) clip-space coordinates (x positive left, y positive up, w positive away from camera). We entirely skip the z component and instead compute it as 1 / w, see next bullet. For TestRect the input is NDC (x/w, y/w).</li>
<li>We use a simple z = 1 / w transform, which is a bit faster than OGL/DX depth transforms. Thus, depth is REVERSED and z = 0 at the far plane and z = inf at w = 0. We also have to use a GREATER depth function, which explains why all the conservative tests will be reversed compared to what you might be used to (for example zMaxTri &gt;= zMinBuffer is a visibility test)</li>
<li>We support different layouts for vertex data (basic AoS and SoA), but note that it's beneficial to store the position data as tightly in memory as possible to reduce cache misses. Big strides are bad, so it's beneficial to keep position as a separate stream (rather than bundled with attributes) or to keep a copy of the position data for the occlusion culling system.</li>
<li>The resolution width must be a multiple of 8 and height a multiple of 4.</li>
<li>The hierarchical Z buffer is stored OpenGL-style with the y axis pointing up. This includes the scissor box.</li>
<li>This code is only tested with Visual Studio 2015, but should hopefully be easy to port to other compilers. </li>
</ul>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a662cd47bd729c561e452983b4933106b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLIPPING_PRESERVES_ORDER&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define CLIPPING_PRESERVES_ORDER to 1 to prevent clipping from reordering triangle rasterization order; This comes at a cost (approx 3-4%) but removes one source of temporal frame-to-frame instability. </p>

</div>
</div>
<a class="anchor" id="a5446852165fb3c08078b5f2b2339cc32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENABLE_STATS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define ENABLE_STATS to 1 to gather various statistics during occlusion culling. Can be used for profiling and debugging. Note that enabling this function will reduce performance significantly. </p>

</div>
</div>
<a class="anchor" id="af89c3f9d86340266935e92bf0f66529e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOC_RECORDER_ENABLE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define MOC_RECORDER_ENABLE to 1 to enable frame recorder (see FrameRecorder.h/cpp for details) </p>

</div>
</div>
<a class="anchor" id="a855546ee8dc10a6e6bc125c5ea9b0f55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRECISE_COVERAGE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define PRECISE_COVERAGE to 1 to more closely match GPU rasterization rules. The increased precision comes at a cost of slightly lower performance. </p>

</div>
</div>
<a class="anchor" id="aff26d3fb3dd5fd95f2fdd48b69be45f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QUICK_MASK&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure the algorithm used for updating and merging hierarchical z buffer entries. If QUICK_MASK is defined to 1, use the algorithm from the paper "Masked Software Occlusion Culling", which has good balance between performance and low leakage. If QUICK_MASK is defined to 0, use the algorithm from "Masked Depth Culling for Graphics Hardware" which has less leakage, but also lower performance. </p>

</div>
</div>
<a class="anchor" id="a6152e1b0a95f335af2f5d9789147aaa8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_AVX512&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define USE_AVX512 to 1 to enable experimental AVX-512 support. It's currently mostly untested and only validated on simple examples using Intel SDE. Older compilers may not support AVX-512 intrinsics. </p>

</div>
</div>
<a class="anchor" id="a72c366d12bc4a47321429c33847c85c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_D3D&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the library for use with Direct3D (default) or OpenGL rendering. This changes whether the screen space Y axis points downwards (D3D) or upwards (OGL), and is primarily important in combination with the PRECISE_COVERAGE define, where this is important to ensure correct rounding and tie-breaker behaviour. It also affects the ScissorRect screen space coordinates. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_73b23aa10d699c686859bdb7269f312d.html">Gems</a></li><li class="navelem"><a class="el" href="dir_c119be581a4eb942a08e236160a7d7c7.html">Atom</a></li><li class="navelem"><a class="el" href="dir_888ec494aefdd7ab962569d75d3a5406.html">RPI</a></li><li class="navelem"><a class="el" href="dir_95571c57efa2c329f753da45d1167a4f.html">Code</a></li><li class="navelem"><a class="el" href="dir_fdecbbe8d973c1dcc57c0a64bc715a37.html">External</a></li><li class="navelem"><a class="el" href="dir_64831ace67961ee61387ecf4b1b48b25.html">MaskedOcclusionCulling</a></li><li class="navelem"><a class="el" href="_masked_occlusion_culling_8h.html">MaskedOcclusionCulling.h</a></li>
    <li class="footer">Generated on Thu Apr 20 2023 21:34:02 for Open 3D Engine Atom Gem API Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
